<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Auditor de Integridad de Datos - BioestadisticaEdu</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: transparent; padding: 10px; }
        .card { background: #fff4f4; border: 2px solid #feb2b2; border-radius: 12px; padding: 25px; max-width: 550px; margin: auto; }
        h2 { color: #9b2c2c; font-size: 1.3rem; margin-top: 0; text-align: center; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.85rem; font-weight: 600; color: #742a2a; }
        input { width: 100%; padding: 10px; border: 1px solid #feb2b2; border-radius: 6px; }
        button { width: 100%; background: #c53030; color: white; border: none; padding: 14px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        #audit-result { margin-top: 20px; padding: 15px; border-radius: 8px; display: none; background: white; border: 1px solid #feb2b2; }
        .fail { color: #c53030; font-weight: bold; }
        .pass { color: #2f855a; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <h2>üïµÔ∏è Auditor de Resultados (GRIM Test)</h2>
    <p style="font-size: 0.8rem; text-align: center; color: #742a2a; margin-bottom: 20px;">
        Verifica si los porcentajes reportados son matem√°ticamente posibles.
    </p>

    <div class="input-group">
        <label>Tama√±o de la Muestra (N)</label>
        <input type="number" id="n_audit" value="45">
    </div>
    <div class="input-group">
        <label>Porcentaje/Promedio Reportado (ej: 22.2)</label>
        <input type="number" id="val_audit" value="22.2" step="0.1">
    </div>

    <button onclick="runAudit()">Ejecutar Auditor√≠a Forense</button>

    <div id="audit-result">
        <div id="veredicto"></div>
        <p id="explicacion" style="font-size: 0.85rem; margin-top: 10px; color: #4a5568;"></p>
        <p style="font-size: 0.7rem; color: #a0aec0; margin-top: 15px; text-align: center;">
            BioestadisticaEdu ¬© 2025 - Mohsen Ebrahimi
        </p>
    </div>
</div>

<script>
function runAudit() {
    const n = parseInt(document.getElementById('n_audit').value);
    const val = parseFloat(document.getElementById('val_audit').value) / 100;
    
    // El n√∫mero de eventos debe ser un entero (con un margen de error por redondeo)
    const eventos = val * n;
    const decimal = Math.abs(eventos - Math.round(eventos));
    
    const resDiv = document.getElementById('audit-result');
    const veredicto = document.getElementById('veredicto');
    const explicacion = document.getElementById('explicacion');
    
    resDiv.style.display = 'block';
    
    if (decimal < 0.01) {
        veredicto.innerHTML = "<span class='pass'>‚úÖ CONSISTENTE</span>";
        explicacion.innerText = `Es matem√°ticamente posible. Corresponde a aproximadamente ${Math.round(eventos)} pacientes de ${n}.`;
    } else {
        veredicto.innerHTML = "<span class='fail'>‚ö†Ô∏è INCONSISTENCIA DETECTADA</span>";
        explicacion.innerText = `Matem√°ticamente imposible. Un porcentaje de ${val*100}% en una muestra de ${n} implicar√≠a ${eventos.toFixed(2)} pacientes. Los datos podr√≠an estar mal reportados o manipulados.`;
    }
}
</script>
</body>
</html>