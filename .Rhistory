)
g_utimodig <- ggplot(analisis_ultimo_digito, aes(x = ultimo_digito, y = prop)) +
geom_hline(yintercept = 0.10, linetype = "solid", color = "black", alpha = 0.5) +
geom_col(aes(fill = es_alto), width = 0.7, color = "white") +
facet_wrap(~ participante) +
scale_fill_manual(values = c("FALSE" = "gray60", "TRUE" = "firebrick"),
labels = c("Esperado", "Desviación Alta")) +
scale_y_continuous(labels = percent_format(accuracy = 1)) +
labs(title = "Detección de Datos Inventados: Análisis del Último Dígito",
subtitle = "Comparación: Datos Reales vs. Inventiva Humana",
fill = "Estado",
x = "Último Dígito",
y = "Frecuencia Relativa") +
theme_academico()
# Tabla Resumen Dígitos
# CORRECCIÓN: Calculamos la SUMA de 0 y 5, no el exceso, para evitar confusiones.
# Lo ideal es 20% (10% + 10%).
tabla_desviacion <- analisis_ultimo_digito %>%
group_by(participante) %>%
summarise(
Desv_Promedio = mean(abs(prop - 0.10)) * 100,
Suma_0_5 = sum(prop[ultimo_digito %in% c(0,5)]) * 100
) %>%
mutate(
# Criterios ajustados para n pequeña (~40 datos)
Evaluacion = case_when(
Desv_Promedio > 5.5 ~ "Patrón Artificial",
Desv_Promedio > 3.0 ~ "Zona Gris / Sospechoso",
TRUE ~ "Patrón Natural"
),
Desv_Promedio = sprintf("%.1f%%", Desv_Promedio),
Suma_0_5 = sprintf("%.1f%%", Suma_0_5)
)
tabla_digitos_display <- tabla_desviacion %>%
select(Participante = participante,
`Desv. Media` = Desv_Promedio,
`Frecuencia 0 y 5` = Suma_0_5, # Nombre más claro
`Evaluación` = Evaluacion)
analisis_ultimo_digito
g_utimodig
analisis_ultimo_digito <- datos %>%
mutate(ultimo_digito = factor(valor %% 10, levels = 0:9)) %>%
count(participante, ultimo_digito, .drop = FALSE) %>%
group_by(participante) %>%
mutate(
prop = n / sum(n),
# Umbral: > 7% de desviación sobre el 10% esperado se marca en rojo
es_alto = abs(prop - 0.10) > 0.07
)
g_utimodig <- ggplot(analisis_ultimo_digito, aes(x = ultimo_digito, y = prop)) +
geom_hline(yintercept = 0.10, linetype = "solid", color = "black", alpha = 0.5) +
geom_col(aes(fill = es_alto), width = 0.7, color = "white") +
facet_wrap(~ participante) +
scale_fill_manual(values = c("FALSE" = "gray60", "TRUE" = "firebrick"),
labels = c("Esperado", "Desviación Alta")) +
scale_y_continuous(labels = percent_format(accuracy = 1)) +
labs(title = "Detección de Datos Inventados: Análisis del Último Dígito",
subtitle = "Comparación: Datos Reales vs. Inventiva Humana",
fill = "Estado",
x = "Último Dígito",
y = "Frecuencia Relativa") +
theme_academico()
# Tabla Resumen Dígitos
# CORRECCIÓN: Calculamos la SUMA de 0 y 5, no el exceso, para evitar confusiones.
# Lo ideal es 20% (10% + 10%).
tabla_desviacion <- analisis_ultimo_digito %>%
group_by(participante) %>%
summarise(
Desv_Promedio = mean(abs(prop - 0.10)) * 100,
Suma_0_5 = sum(prop[ultimo_digito %in% c(0,5)]) * 100
) %>%
mutate(
# Criterios ajustados para n pequeña (~40 datos)
Evaluacion = case_when(
Desv_Promedio > 5.5 ~ "Patrón Artificial",
Desv_Promedio > 3.0 ~ "Zona Gris / Sospechoso",
TRUE ~ "Patrón Natural"
),
Desv_Promedio = sprintf("%.1f%%", Desv_Promedio),
Suma_0_5 = sprintf("%.1f%%", Suma_0_5)
)
tabla_digitos_display <- tabla_desviacion %>%
select(Participante = participante,
`Desv. Media` = Desv_Promedio,
`Frecuencia 0 y 5` = Suma_0_5, # Nombre más claro
`Evaluación` = Evaluacion)
# Tabla Resumen Dígitos
# CORRECCIÓN: Calculamos la SUMA de 0 y 5, no el exceso, para evitar confusiones.
# Lo ideal es 20% (10% + 10%).
tabla_desviacion <- analisis_ultimo_digito %>%
group_by(participante) %>%
summarise(
Desv_Promedio = mean(abs(prop - 0.10)) * 100,
Suma_0_5 = sum(prop[ultimo_digito %in% c(0,5)]) * 100 # <--- ESTE ES EL NUEVO NOMBRE
) %>%
mutate(
Evaluacion = if_else(Desv_Promedio > 5.5, "Patrón Artificial",
if_else(Desv_Promedio > 3.0, "Zona Gris", "Patrón Natural")),
Desv_Promedio = sprintf("%.1f%%", Desv_Promedio),
Suma_0_5 = sprintf("%.1f%%", Suma_0_5)
)
tabla_desviacion <- analisis_ultimo_digito %>%
group_by(participante) %>%
summarise(
Desv_Promedio = mean(abs(prop - 0.10)) * 100,
Suma_0_5 = sum(prop[ultimo_digito %in% c(0,5)]) * 100 # <--- CAMBIO IMPORTANTE
) %>%
mutate(
# Ajustamos criterios para ser más justos con muestras pequeñas
Evaluacion = case_when(
Desv_Promedio > 5.5 ~ "Patrón Artificial",
Desv_Promedio > 3.0 ~ "Zona Gris / Sospechoso",
TRUE ~ "Patrón Natural"
),
Desv_Promedio = sprintf("%.1f%%", Desv_Promedio),
Suma_0_5 = sprintf("%.1f%%", Suma_0_5)
)
# Preparamos la tabla lista para imprimir (para simplificar el Rmd)
tabla_digitos_display <- tabla_desviacion %>%
select(Participante = participante,
`Desv. Media` = Desv_Promedio,
`Frecuencia 0 y 5` = Suma_0_5,
`Evaluación` = Evaluacion)
tabla_desviacion %>%
mutate(
`Desv. Media` = sprintf("%.1f%%", Desv_Promedio),
`Frecuencia 0 y 5` = sprintf("%.1f%%", Suma_0_5) # Usamos la variable correcta
) %>%
select(Participante = participante,
`Desv. Media`,
`Frecuencia 0 y 5`,
Evaluacion) %>%
kable(align = "lccr") %>%
kable_styling(bootstrap_options = "striped", full_width = F)
analisis_ultimo_digito %>%
mutate(
texto_prop = sprintf("%.1f%%", prop * 100),
texto_prop = if_else(es_alto, paste0("**", texto_prop, "**"), texto_prop)
) %>%
select(Dígito = ultimo_digito, Participante = participante, texto_prop) %>%
pivot_wider(names_from = Participante, values_from = texto_prop, values_fill = "0.0%") %>%
kable(align = "c") %>%
kable_styling(bootstrap_options = "striped", full_width = F)
tabla_desviacion %>%
select(Participante = participante,
`Desv. Media` = Desv_Promedio,
`Frecuencia 0 y 5` = Suma_0_5,
Evaluacion) %>%
kable(align = "lccr") %>%
kable_styling(bootstrap_options = "striped", full_width = F)
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::stop_server()
blogdown:::stop_server() # Detiene el servidor.
unlink("public", recursive = TRUE)   # Borrar carpeta public
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown:::serve_site()
unlink("content/es/post/2025-10-20-pinocho/index_cache", recursive = TRUE)
blogdown:::stop_server() # Detiene el servidor.
blogdown:::build_site()  # Construye el sitio localmente.
unlink("public", recursive = TRUE)   # Borrar carpeta public
blogdown::build_site(local = FALSE)
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown:::stop_server() # Detiene el servidor.
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::stop_server()
unlink("public", recursive = TRUE)   # Borrar carpeta public
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
unlink("public", recursive = TRUE)   # Borrar carpeta public
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown:::serve_site()  # Sirve localmente para preview.
blogdown:::serve_site()  # Sirve localmente para preview.
blogdown::serve_site()
blogdown::hugo_version()
blogdown::serve_site()
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::serve_site()
datos_queso <- data.frame(
Año = 2000:2009,
Queso = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 32.7, 32.4, 32.8),
Muertes = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
datos_queso %>%
kable(col.names = c("Año", "Consumo de Queso (Lbs/persona)", "Muertes por Sábanas"),
caption = "Datos oficiales del USDA y CDC (vía Tyler Vigen)") %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
library(tidyverse)
datos_queso <- data.frame(
Año = 2000:2009,
Queso = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 32.7, 32.4, 32.8),
Muertes = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
datos_queso %>%
kable(col.names = c("Año", "Consumo de Queso (Lbs/persona)", "Muertes por Sábanas"),
caption = "Datos oficiales del USDA y CDC (vía Tyler Vigen)") %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
library(tidyverse)
library(kable)
library(tidyverse)
library(kable)
library(tidyverse)
library(knitr)
library(kableExtra)
datos_queso <- data.frame(
Año = 2000:2009,
Queso = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 32.7, 32.4, 32.8),
Muertes = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
datos_queso %>%
kable(col.names = c("Año", "Consumo de Queso (Lbs/persona)", "Muertes por Sábanas"),
caption = "Datos oficiales del USDA y CDC (vía Tyler Vigen)") %>%
kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
# ===============================
# Correlación espuria: Queso vs Sábanas
# ===============================
# Dataset
datos <- data.frame(
year = 2000:2009,
cheese = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
deaths = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 721)
)
# Correlación de Pearson
r <- cor(datos$cheese, datos$deaths, method = "pearson")
r2 <- r^2
# Scatter plot
plot(
datos$cheese, datos$deaths,
pch = 19,
xlab = "Consumo per cápita de queso (lb/año)",
ylab = "Muertes por enredarse en sábanas",
main = "Ejemplo clásico de correlación espuria"
)
# Recta de regresión
abline(lm(deaths ~ cheese, data = datos), lwd = 2)
# Anotación estadística
legend(
"topleft",
legend = c(
paste0("r = ", round(r, 3)),
paste0("R² = ", round(r2, 3))
),
bty = "n"
)
# datos_queso %>%
# kable(col.names = c("Año", "Consumo de Queso (Lbs/persona)", "Muertes por Sábanas"),
# caption = "Datos oficiales del USDA y CDC (vía Tyler Vigen)") %>%
# kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
# ===============================
# Correlación espuria: Queso vs Sábanas
# ===============================
# Dataset
datos <- data.frame(
year = 2000:2009,
cheese = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
deaths = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 721)
)
# Correlación de Pearson
r <- cor(datos$cheese, datos$deaths, method = "pearson")
r2 <- r^2
# Scatter plot
plot(
datos$cheese, datos$deaths,
pch = 19,
xlab = "Consumo per cápita de queso (lb/año)",
ylab = "Muertes por enredarse en sábanas",
main = "grafico 1. Consumo de Queso según número de muertes por sábanas. "
)
# Recta de regresión
abline(lm(deaths ~ cheese, data = datos), lwd = 2)
# Anotación estadística
legend(
"topleft",
legend = c(
paste0("r = ", round(r, 3)),
paste0("R² = ", round(r2, 3))
),
bty = "n"
)
# 1. CARGA DE LIBRERÍAS (Modo Silencioso)
suppressMessages({
library(tidyverse)
library(kableExtra)
library(knitr)
library(ggplot2) # Para gráficos avanzados
library(DT)  # Añade esto en el chunk setup si no lo tienes
})
# 3. CONFIGURACIÓN VISUAL
knitr::opts_chunk$set(
echo = FALSE, warning = FALSE, message = FALSE,
fig.align = "center", fig.retina = 2, fig.width = 10, fig.height = 6,
dev = 'svg'
)
# TEMA GRÁFICO UNIFICADO (Para que todo se vea profesional)
theme_academico <- function() {
theme_minimal(base_size = 12) +
theme(
plot.title = element_text(face = "bold", size = 14, color = "#2c3e50"),
plot.subtitle = element_text(color = "#7f8c8d", margin = margin(b = 10)),
strip.text = element_text(face = "bold", size = 11),
legend.position = "bottom",
panel.grid.minor = element_blank()
)
}
datos_queso <- data.frame(
Año = 2000:2009,
Queso = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
Muertes = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
# ===============================
# Correlación espuria: Queso vs Sábanas
# ===============================
# Dataset
datos <- data.frame(
year = 2000:2009,
cheese = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
deaths = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
# datos %>%
# kable(col.names = c("Año", "Consumo de Queso (Lbs/persona)", "Muertes por Sábanas"),
# caption = "Datos oficiales del USDA y CDC (vía Tyler Vigen)")
# Correlación de Pearson
r <- cor(datos$cheese, datos$deaths, method = "pearson")
r2 <- r^2
# Scatter plot con ggplot
ggplot(datos, aes(x = cheese, y = deaths)) +
geom_point(size = 3, color = "#2c3e50") +
geom_smooth(method = "lm", se = FALSE, color = "#e74c3c") +
labs(title = "Gráfico 1. Consumo de queso vs. muertes por sábanas",
x = "Consumo per cápita de queso (lb/año)",
y = "Muertes por enredarse en sábanas") +
theme_academico() +
annotate("text", x = min(datos$cheese), y = max(datos$deaths),
label = paste0("r = ", round(r, 3), "\nR² = ", round(r2, 3)),
hjust = 0, vjust = 1, size = 4, color = "#34495e")
datatable(
datos,
colnames = c("Año", "Consumo de Queso (Lbs/persona)", "Muertes por Sábanas"),
caption = "Datos oficiales del USDA y CDC (vía Tyler Vigen)",
options = list(
pageLength = 10,  # Muestra todas las filas sin paginación (datos pequeños)
searching = TRUE,  # Habilita búsqueda
ordering = TRUE,   # Ordenamiento por columnas
dom = 't'          # Solo tabla, sin extras si quieres minimalista
)
)
blogdown::serve_site()
blogdown:::stop_server()
blogdown:::serve_site()
blogdown:::preview_site()
blogdown:::preview_site()
blogdown::build_site()
blogdown::build_site()
# 1. CARGA DE LIBRERÍAS (Modo Silencioso)
suppressMessages({
library(tidyverse)
library(kableExtra)
library(knitr)
library(ggplot2) # Para gráficos avanzados
library(DT)  # Añade esto en el chunk setup si no lo tienes
})
# 3. CONFIGURACIÓN VISUAL
knitr::opts_chunk$set(
echo = FALSE, warning = FALSE, message = FALSE,
fig.align = "center", fig.retina = 2, fig.width = 10, fig.height = 6,
dev = 'svg'
)
# TEMA GRÁFICO UNIFICADO (Para que todo se vea profesional)
theme_academico <- function() {
theme_minimal(base_size = 12) +
theme(
plot.title = element_text(face = "bold", size = 14, color = "#2c3e50"),
plot.subtitle = element_text(color = "#7f8c8d", margin = margin(b = 10)),
strip.text = element_text(face = "bold", size = 11),
legend.position = "bottom",
panel.grid.minor = element_blank()
)
}
datos_queso <- data.frame(
Año = 2000:2009,
Queso = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
Muertes = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
# ===============================
# Correlación espuria: Queso vs Sábanas
# ===============================
# Dataset
datos <- data.frame(
year = 2000:2009,
cheese = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
deaths = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
# datos %>%
# kable(col.names = c("Año", "Consumo de Queso (Lbs/persona)", "Muertes por Sábanas"),
# caption = "Datos oficiales del USDA y CDC (vía Tyler Vigen)")
# Correlación de Pearson
r <- cor(datos$cheese, datos$deaths, method = "pearson")
r2 <- r^2
# Scatter plot con ggplot
ggplot(datos, aes(x = cheese, y = deaths)) +
geom_point(size = 3, color = "#2c3e50") +
geom_smooth(method = "lm", se = FALSE, color = "#e74c3c") +
labs(title = "Gráfico 1. Consumo de queso vs. muertes por sábanas",
x = "Consumo per cápita de queso (lb/año)",
y = "Muertes por enredarse en sábanas") +
theme_academico() +
annotate("text", x = min(datos$cheese), y = max(datos$deaths),
label = paste0("r = ", round(r, 3), "\nR² = ", round(r2, 3)),
hjust = 0, vjust = 1, size = 4, color = "#34495e")
blogdown::stop_server()
unlink("public", recursive = TRUE)   # Borrar carpeta public
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::build_site(local = FALSE)
blogdown::build_site(local = FALSE, build_rmd = TRUE)
# Dataset
datos <- data.frame(
year = 2000:2009,
cheese = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
deaths = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
# Correlación
r <- cor(datos$cheese, datos$deaths, method = "pearson")
r2 <- r^2
# Scatter plot
ggplot(datos, aes(x = cheese, y = deaths)) +
geom_point(size = 3, color = "#2c3e50") +
geom_smooth(method = "lm", se = FALSE, color = "#e74c3c") +
labs(title = "Gráfico 1. Consumo de queso segun muertes por sabanas",
x = "Consumo per capita de queso (lb/ano)",
y = "Muertes por enredarse en sabanas") +
theme_academico() +
annotate("text", x = min(datos$cheese), y = max(datos$deaths),
label = paste0("r = ", round(r, 3), "\nR² = ", round(r2, 3)),
hjust = 0, vjust = 1, size = 4, color = "#34495e")
# 1. CARGA DE LIBRERÍAS
suppressMessages({
library(tidyverse)
library(kableExtra)
library(knitr)
library(ggplot2)
library(DT)
})
# 3. CONFIGURACIÓN VISUAL
knitr::opts_chunk$set(
echo = FALSE, warning = FALSE, message = FALSE,
fig.align = "center", fig.retina = 2, fig.width = 10, fig.height = 6,
dev = 'svg'
)
# TEMA GRÁFICO UNIFICADO
theme_academico <- function() {
theme_minimal(base_size = 12) +
theme(
plot.title = element_text(face = "bold", size = 14, color = "#2c3e50"),
plot.subtitle = element_text(color = "#7f8c8d", margin = margin(b = 10)),
strip.text = element_text(face = "bold", size = 11),
legend.position = "bottom",
panel.grid.minor = element_blank()
)
}
datos_queso <- data.frame(
Año = 2000:2009,
Queso = c(29.8, 30.1, 30.5, 30.6, 31.3, 31.7, 32.6, 33.1, 32.7, 32.8),
Muertes = c(327, 456, 509, 497, 596, 573, 661, 741, 809, 717)
)
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::build_site(local = FALSE, build_rmd = TRUE)
# Buscar archivos con caracteres prohibidos (tildes, espacios, eñes, paréntesis)
todos_los_archivos <- list.files(path = "content", recursive = TRUE, full.names = TRUE)
prohibidos <- todos_los_archivos[grep("[^a-zA-Z0-9./_-]", todos_los_archivos)]
if(length(prohibidos) > 0) {
message("⚠️ Archivos detectados con caracteres especiales:")
print(prohibidos)
} else {
message("✅ No se detectaron caracteres especiales en los nombres.")
}
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::serve_site()
blogdown::serve_site()
unlink("public", recursive = TRUE)   # Borrar carpeta public
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::build_site(local = FALSE, build_rmd = TRUE)
blogdown::serve_site()
blogdown::stop_server()
blogdown::build_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
