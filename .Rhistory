vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
res_grafico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
library(tidyverse)
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
res_grafico %>% glimpse()
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
"Probabilidad ≥1 exacerbación" = "tomato")) +
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
"Probabilidad ≥1 exacerbación" = "tomato")) +
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad ≥1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad >=1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad >=1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad >=1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
scale_fill_manual(values = c(
"Media de exacerbaciones" = "steelblue",
"Probabilidad >=1 exacerbación" = "tomato"
Sys.setlocale("LC_ALL", "Spanish_Spain.UTF-8")
library(tidyverse)
library(ggplot2)
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad >=1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
"Probabilidad >=1 exacerbación" = "tomato")) +
labs(
title = "Fenómeno clínico vs. objetivo simplificado",
subtitle = "El efecto se manifiesta en la media de exacerbaciones,\n pero se reduce al dicotomizar el desenlace como >=1 exacerbación",
x = "Grupo",
y = "Valor",
fill = "Medida" ) +
theme_minimal(base_size = 13) +
coord_cartesian(ylim = c(0, max(res_grafico$valor) + 0.2))
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad >=1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
"Probabilidad >=1 exacerbación" = "tomato")) +
labs(
title = "Fenómeno clínico vs. objetivo simplificado",
subtitle = "El efecto se manifiesta en la media de exacerbaciones,\n pero se reduce al dicotomizar el desenlace como >=1 exacerbación",
x = "Grupo",
y = "Valor",
fill = "Medida" ) +
theme_minimal(base_size = 13) +
coord_cartesian(ylim = c(0, max(res_grafico$valor) + 0.2))
set.seed(456)
n <- 100
datos <- tibble(
id = 1:n,
grupo = rep(c("Control", "Tratamiento"), each = n/2)
)
# Ajustamos lambda para mostrar la desconexión
lambda <- c(Control = 1.5, Tratamiento = 0.5)
datos <- datos %>%
mutate(
exac = rpois(n(), lambda[grupo]),
binaria = ifelse(exac >= 1, 1, 0)
)
# Resumen para tabla
res_tabla <- datos %>%
group_by(grupo) %>%
summarise(
exac_media = mean(exac),
prob_al_menos_una = mean(binaria)
)
# res_tabla
# Preparar datos para gráfico
res_grafico <- res_tabla %>%
pivot_longer(cols = c(exac_media, prob_al_menos_una),
names_to = "medida",
values_to = "valor") %>%
mutate(
medida = recode(medida,
exac_media = "Media de exacerbaciones",
prob_al_menos_una = "Probabilidad >=1 exacerbación")
)
# Gráfico combinado
ggplot(res_grafico, aes(x = grupo, y = valor, fill = medida)) +
geom_col(position = position_dodge(width = 0.7), width = 0.6) +
geom_text(aes(label = round(valor, 2)),
position = position_dodge(width = 0.7),
vjust = -0.5, size = 4) +
scale_fill_manual(values = c("Media de exacerbaciones" = "steelblue",
"Probabilidad >=1 exacerbación" = "tomato")) +
labs(
title = "Fenómeno clínico vs. objetivo simplificado",
subtitle = "El efecto se manifiesta en la media de exacerbaciones,\n pero se reduce al dicotomizar el desenlace como >=1 exacerbación",
x = "Grupo",
y = "Valor",
fill = "Medida" ) +
theme_minimal(base_size = 13) +
coord_cartesian(ylim = c(0, max(res_grafico$valor) + 0.2))
