<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>C√≥digo Pr√°ctico en R O Python | Bioestad√≠stica edu</title><link>https://maicel.netlify.app/categories/codigo-practico-en-r-o-python/</link><atom:link href="https://maicel.netlify.app/categories/codigo-practico-en-r-o-python/index.xml" rel="self" type="application/rss+xml"/><description>C√≥digo Pr√°ctico en R O Python</description><generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>es-es</language><lastBuildDate>Thu, 08 Feb 2024 00:00:00 +0000</lastBuildDate><image><url>https://maicel.netlify.app/media/icon_hu_551fbaee136b383e.png</url><title>C√≥digo Pr√°ctico en R O Python</title><link>https://maicel.netlify.app/categories/codigo-practico-en-r-o-python/</link></image><item><title>C√≥mo entrenar y validar un modelo de predicci√≥n cl√≠nica</title><link>https://maicel.netlify.app/posts/2025-02-08-como-entrenar-y-validar-un-modelo-de-machine-learnig/</link><pubDate>Thu, 08 Feb 2024 00:00:00 +0000</pubDate><guid>https://maicel.netlify.app/posts/2025-02-08-como-entrenar-y-validar-un-modelo-de-machine-learnig/</guid><description>&lt;p>üéß &lt;strong>Escucha el podcast de esta publicaci√≥n&lt;/strong>&lt;/p>
&lt;audio controls >
&lt;source src="https://ia600607.us.archive.org/24/items/articulo-steyember/_Articulo_Steyember.mp3" type="audio/mpeg">
&lt;/audio>
&lt;p>Si usted es Investigador en Salud o, peor a√∫n, estudiante de posgrado, maestr√≠a o doctorado en el campo de las ciencias biom√©dicas&amp;hellip; &lt;strong>¬°bienvenido al club del estr√©s!&lt;/strong>&lt;/p>
&lt;p>Seguro que usted est√° enfocado en desarrollar esos geniales &lt;strong>modelos de predicci√≥n cl√≠nica&lt;/strong> para el &lt;strong>diagn√≥stico&lt;/strong> o el &lt;strong>pron√≥stico&lt;/strong>. Y es casi seguro que ha llegado a esa fase donde la metodolog√≠a se siente como un muro de ladrillos. Un d√≠a est√°s bien, y al siguiente te das cuenta de que no sabes qu√© pasos seguir, qu√© software usar, o lo peor: si tu modelo servir√° para algo m√°s all√° de llenar un repositorio de tesis. Lo digo sin tapujos: esa frase lapidaria de &lt;strong>&amp;lsquo;Ese valor tan alto de la Curva Roc y la ausencia de m√©tricas de calibraci√≥n&amp;rsquo;&lt;/strong> puede significar que tu modelo tiene el famoso &lt;strong>s√≠ndrome del &amp;ldquo;sobreajuste&amp;rdquo;&lt;/strong>. En otras palabras, funciona espectacularmente bien&amp;hellip; solo para la muestra que lo cre√≥.&lt;/p>
&lt;p>Es una locura, ¬øverdad? Mientras las tesis de alto nivel giran en torno a crear estos modelos de predicci√≥n cl√≠nica, los cursos de Bioestad√≠stica (¬°incluida la especialidad!) pasan de puntillas por el tema. Hay una brecha gigantesca, y la ansiedad de tener que aprenderlo todo YA es real. Pero respira. Este post es tu chaleco salvavidas: tu Traductor Metodol√≥gico no oficial y (casi) libre de l√°grimas. Yo mismo pas√© por ese infierno metodol√≥gico en mi tesis de doctorado, as√≠ que no solo doy consejos: comparto la experiencia de quien ya quem√≥ sus pesta√±as por ti.&lt;/p>
&lt;p>Olvida el c√≥digo complejo y enrevesado. Aqu√≠ nos enfocamos en la l√≥gica esencial para construir un modelo predictivo robusto y fiable. Desglosaremos el proceso paso a paso, quit√°ndole el miedo a la estad√≠stica con un &lt;strong>C√≥digo Pr√°ctico en R&lt;/strong>. Empezaremos con la &lt;strong>Estrategia de Modelado&lt;/strong>; el c√≥digo (y opciones para quienes prefieren SPSS) vendr√° despu√©s. &lt;strong>¬°Empecemos!&lt;/strong>&lt;/p>
&lt;h1 id="estrategia-de-modelado">Estrategia de modelado&lt;/h1>
&lt;p>Contar con una estrategia de modelado adecuada es esencial para desarrollar y validar modelos de predicci√≥n. En este art√≠culo exploraremos las siete etapas clave propuestas por Ewout Steyerberg en su trabajo (1).&lt;/p>
&lt;h2 id="sec-1">1. Definici√≥n del problema e inspecci√≥n de datos&lt;/h2>
&lt;p>El primer paso en cualquier proyecto de modelado es &lt;strong>definir claramente el problema de investigaci√≥n&lt;/strong> y seleccionar la &lt;strong>variable de resultado&lt;/strong> adecuada.&lt;/p>
&lt;div class="flex px-4 py-3 mb-6 rounded-md bg-primary-100 dark:bg-primary-900">
&lt;span class="pr-3 pt-1 text-primary-600 dark:text-primary-300">
&lt;svg height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0a9 9 0 0 1 18 0m-9-3.75h.008v.008H12z"/>&lt;/svg>
&lt;/span>
&lt;span class="dark:text-neutral-300">La &lt;strong>variable de resultado&lt;/strong> debe definirse con precisi√≥n: especifica &lt;strong>qu√© evento se predice&lt;/strong>, &lt;strong>c√≥mo y cu√°ndo se mide&lt;/strong>, y el &lt;strong>horizonte temporal de predicci√≥n&lt;/strong> (por ejemplo, mortalidad a 30 d√≠as). Indica adem√°s el m√©todo de evaluaci√≥n y si hubo &lt;strong>cegamiento&lt;/strong> respecto a los predictores, para garantizar coherencia y validez del modelo.&lt;/span>
&lt;/div>
&lt;p>Durante esta fase, tambi√©n realizamos un an√°lisis exploratorio de datos (EDA) para comprender las caracter√≠sticas de las variables y detectar posibles problemas, como &lt;strong>datos at√≠picos&lt;/strong> o &lt;strong>valores faltantes&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-r" data-lang="r">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Realiza una descripci√≥n general del conjunto de datos&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Instala y Carga de Librer√≠as √∫tiles &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(caret)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(MLDataR) &lt;span style="color:#75715e"># para utilizar la biblioteca diabetes_data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(dplyr)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(dlookr) &lt;span style="color:#75715e"># para EDA&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">library&lt;/span>(predtools)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Cargar el conjunto de datos&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">data&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;gusto&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gusto &lt;span style="color:#f92672">&amp;lt;-&lt;/span> gusto
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># EDA&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>descripcion &lt;span style="color:#f92672">&amp;lt;-&lt;/span> &lt;span style="color:#a6e22e">overview&lt;/span>(gusto)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">summary&lt;/span>(descripcion) &lt;span style="color:#75715e"># descripci√≥n general del conjunto de datos&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;!-- Para conocer m√°s detalles sobre el proceso de ¬®Exploratory Data Analysis (EDA)¬® [ver la publicaci√≥n dedicada a este tema](es/post/2025-02-11-eda/_index.Rmd) -->
&lt;h2 id="sec-2">2. Codificaci√≥n de las variables predictoras&lt;/h2>
&lt;p>La &lt;strong>codificaci√≥n&lt;/strong> adecuada de las &lt;strong>variables predictoras&lt;/strong> es fundamental para construir modelos robustos.&lt;/p>
&lt;p>Es probable que debas utilizar t√©cnicas como la agrupaci√≥n de categor√≠as poco frecuentes y la creaci√≥n de predictores res√∫menes para simplificar informaci√≥n correlacionada. Si el algoritmo seleccionado es la &lt;strong>regresi√≥n log√≠stica&lt;/strong>, es posible que le haga falta aplicar t√©cnicas como los &lt;strong>splines c√∫bicos restringidos&lt;/strong> para relajar el supuesto de linealidad entre la variable dependiente y el resultado.&lt;/p>
&lt;div class="flex px-4 py-3 mb-6 rounded-md bg-primary-100 dark:bg-primary-900">
&lt;span class="pr-3 pt-1 text-primary-600 dark:text-primary-300">
&lt;svg height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0a9 9 0 0 1 18 0m-9-3.75h.008v.008H12z"/>&lt;/svg>
&lt;/span>
&lt;span class="dark:text-neutral-300">Cada variable predictora debe definirse con su m√©todo de medici√≥n y momento. Las variables continuas deben reportarse con sus unidades; si se categorizan, debe justificarse los puntos de corte. Las variables categ√≥ricas deben listar todas sus categor√≠as y especificar la categor√≠a de referencia. El modelo final debe presentar la codificaci√≥n completa utilizada para cada predictor.&lt;/span>
&lt;/div>
&lt;p>üí° &lt;strong>Tip:&lt;/strong> Dicotomizar predictores cuantitativos (por ejemplo, transformar una variable continua como la edad o la presi√≥n arterial en una variable binaria, como ‚Äú‚â•65 a√±os = 1‚Äù y ‚Äú&amp;lt;65 = 0‚Äù) es considerada una mala pr√°ctica metodol√≥gica por p√©rdida de informaci√≥n, menos poder estad√≠stico, puntos de corte arbitrarios y riesgo de sobreajuste.&lt;/p>
&lt;h2 id="sec-3">3 .Especificaci√≥n del tipo de modelo&lt;/h2>
&lt;p>En esta etapa se define la estructura formal del modelo, lo que incluye el tipo de relaci√≥n entre variables (p. ej., lineal, no lineal) y, de manera crucial, la selecci√≥n de los predictores finales que lo integrar√°n.&lt;/p>
&lt;p>
&lt;figure >
&lt;div class="flex justify-center ">
&lt;div class="w-100" >&lt;img alt="" srcset="
/posts/2025-02-08-como-entrenar-y-validar-un-modelo-de-machine-learnig/modelos_elecion_hu_8c0e0341cce17729.webp 400w,
/posts/2025-02-08-como-entrenar-y-validar-un-modelo-de-machine-learnig/modelos_elecion_hu_7b91ac5dc10d2f43.webp 760w,
/posts/2025-02-08-como-entrenar-y-validar-un-modelo-de-machine-learnig/modelos_elecion_hu_e3e07ff54d991fd6.webp 1200w"
src="https://maicel.netlify.app/posts/2025-02-08-como-entrenar-y-validar-un-modelo-de-machine-learnig/modelos_elecion_hu_8c0e0341cce17729.webp"
width="760"
height="507"
loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;/figure>
&lt;/p>
&lt;p>La elecci√≥n de predictores no debe basarse en la aplicaci√≥n mec√°nica de m√©todos algor√≠tmicos como la &lt;strong>Regresi√≥n Paso a Paso (RPP)&lt;/strong>, ya que suelen producir modelos inestables y sobreajustados, especialmente en contextos biom√©dicos y sociales. En su lugar, se recomienda:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Priorizar el &lt;strong>juicio cl√≠nico, la revisi√≥n sistem√°tica de la literatura y la experiencia previa.&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Evitar la preselecci√≥n de variables basada √∫nicamente en valores &lt;em>p&lt;/em> de an√°lisis bivariados.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Optar por un conjunto reducido de predictores cl√≠nicamente relevantes definidos a priori, o incluir todos los candidatos en el modelo multivariable inicial sin filtrado estad√≠stico previo.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="sec-4">4. Estimaci√≥n del Modelo&lt;/h2>
&lt;p>Una vez especificado el modelo (es decir, definidos los predictores y la estructura funcional), el paso de estimaci√≥n tiene como objetivo calcular los coeficientes o par√°metros que mejor se ajusten a los datos de entrenamiento.&lt;/p>
&lt;p>En modelos de regresi√≥n, esto implica t√≠picamente el uso de m√©todos como la &lt;strong>m√°xima verosimilitud&lt;/strong>. Sin embargo, cuando el n√∫mero de eventos es limitado o el de predictores es alto, el riesgo de sobreajuste es elevado, lo que genera predicciones extremas y poco generalizables. Para mitigarlo, se emplean t√©cnicas de &lt;strong>regularizaci√≥n, penalizaci√≥n o shrinkage&lt;/strong>, que ajustan los coeficientes hacia cero para mejorar la estabilidad y la calibraci√≥n en nuevas poblaciones.&lt;/p>
&lt;p>El objetivo final no es maximizar el rendimiento aparente en la muestra de desarrollo, sino obtener un modelo con &lt;strong>predicciones estables, bien calibradas y cl√≠nicamente √∫tiles&lt;/strong>.&lt;/p>
&lt;div class="flex px-4 py-3 mb-6 rounded-md bg-primary-100 dark:bg-primary-900">
&lt;span class="pr-3 pt-1 text-primary-600 dark:text-primary-300">
&lt;svg height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">&lt;path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0a9 9 0 0 1 18 0m-9-3.75h.008v.008H12z"/>&lt;/svg>
&lt;/span>
&lt;span class="dark:text-neutral-300">Es recomendable aplicar siempre una validaci√≥n interna (como bootstrapping o cross-validation) para cuantificar y corregir el optimismo en las m√©tricas de rendimiento. La ecuaci√≥n final del modelo debe presentarse de forma completa ‚Äîincluyendo todos los coeficientes, el intercepto y, si corresponde, la supervivencia basal‚Äî, reportando m√©tricas de calibraci√≥n y discriminaci√≥n con sus intervalos de confianza.&lt;/span>
&lt;/div>
&lt;h2 id="sec-5">5. Evaluaci√≥n del Rendimiento del Modelo&lt;/h2>
&lt;p>Una vez desarrollado el modelo, es esencial cuantificar su capacidad predictiva antes de su validaci√≥n. Esta evaluaci√≥n se centra en tres aspectos clave:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>Calibraci√≥n:&lt;/strong> Mide la concordancia entre las probabilidades predichas y las observadas. Por ejemplo, ¬øun 10% de riesgo predicho se corresponde con un 10% de eventos observados? Se eval√∫a visualmente con curvas de calibraci√≥n y cuantitativamente con par√°metros como el intercepto (A, calibraci√≥n-in-the-large) y la pendiente de calibraci√≥n (B).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Discriminaci√≥n:&lt;/strong> Eval√∫a la capacidad del modelo para distinguir entre pacientes que experimentan el evento y aquellos que no. La m√©trica m√°s com√∫n es el estad√≠stico C (o AUC-ROC), que representa la probabilidad de que un paciente con el evento tenga una puntuaci√≥n de riesgo m√°s alta que uno sin √©l.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Utilidad Cl√≠nica:&lt;/strong> Determina si el modelo es √∫til para la toma de decisiones. El an√°lisis de curvas de decisi√≥n y el Beneficio Neto (NB) permiten evaluar si el uso del modelo conduce a mejores resultados cl√≠nicos netos en comparaci√≥n con estrategias alternativas (como tratar a todos o a ninguno).&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="sec-6">6. Evaluaci√≥n de la Validez del Modelo&lt;/h2>
&lt;p>La evaluaci√≥n del rendimiento en los datos de desarrollo suele ser optimista. Por ello, es crucial evaluar la validez del modelo en datos no utilizados para su construcci√≥n, un proceso que se divide en:&lt;/p>
&lt;p>&lt;strong>Validaci√≥n Interna:&lt;/strong> Eval√∫a la reproducibilidad del modelo, es decir, su rendimiento en m√∫ltiples muestras de la misma poblaci√≥n subyacente. T√©cnicas como el bootstrapping o la validaci√≥n cruzada son superiores a la divisi√≥n simple de la muestra, ya que cuantifican y corrigen el optimismo en las m√©tricas de rendimiento sin reducir el tama√±o de la muestra de desarrollo.&lt;/p>
&lt;p>&lt;strong>Validaci√≥n Externa:&lt;/strong> Es la prueba definitiva de la generalizabilidad o transportabilidad del modelo. Consiste en aplicar el modelo a una poblaci√≥n completamente independiente, lo que puede incluir:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>Validaci√≥n Temporal:&lt;/strong> Usar pacientes reclutados en un per√≠odo posterior.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Validaci√≥n Geogr√°fica:&lt;/strong> Aplicar el modelo en pacientes de otros centros u hospitales.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Validaci√≥n Fuerte:&lt;/strong> Probar el modelo en un entorno cl√≠nico o una poblaci√≥n con caracter√≠sticas diferentes a las originales.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Este paso es fundamental para confirmar que el modelo mantiene su calibraci√≥n, discriminaci√≥n y utilidad cl√≠nica en la pr√°ctica real.&lt;/p>
&lt;h2 id="sec-7">7. Presentaci√≥n del modelo&lt;/h2>
&lt;p>La presentaci√≥n efectiva es crucial para la adopci√≥n cl√≠nica. Un modelo perfecto es in√∫til si los m√©dicos no pueden interpretarlo f√°cilmente. Considera:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Nomogramas&lt;/strong>: Ideales para uso r√°pido en consulta&lt;/li>
&lt;li>&lt;strong>Aplicaciones web/m√≥viles&lt;/strong>: Para integraci√≥n en flujos de trabajo cl√≠nicos&lt;/li>
&lt;li>&lt;strong>Puntuaciones de riesgo&lt;/strong>: Simplificadas para triaje r√°pido&lt;/li>
&lt;li>&lt;strong>Documentaci√≥n clara&lt;/strong>: Incluyendo limitaciones y casos de uso&lt;/li>
&lt;/ul>
&lt;p>Recuerda: la transparencia en la presentaci√≥n favorece la confianza cl√≠nica.&lt;/p>
&lt;p>¬øHas aplicado estas t√©cnicas en tus proyectos de Machine Learning? ¬øQu√© estrategias usas para entrenar y validar tus modelos? D√©jame tus comentarios üí¨: comparte tus experiencias, dificultades o tips contigo. ¬°Juntos podemos enriquecer este conocimiento!&lt;/p>
&lt;h1 id="bibliograf√≠a">Bibliograf√≠a&lt;/h1>
&lt;ol>
&lt;li>Steyerberg EW, Vergouwe Y. Towards better clinical prediction models: seven steps for development and an ABCD for validation. European Heart Journal [Internet]. 1 de agosto de 2014 [citado 9 de mayo de 2021];35(29):1925-31. Disponible en: &lt;a href="https://academic.oup.com/eurheartj/article-lookup/doi/10.1093/eurheartj/ehu207" target="_blank" rel="noopener">https://academic.oup.com/eurheartj/article-lookup/doi/10.1093/eurheartj/ehu207&lt;/a>&lt;/li>
&lt;/ol></description></item></channel></rss>