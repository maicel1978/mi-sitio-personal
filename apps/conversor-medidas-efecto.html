<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor de Medidas de Efecto - BioestadisticaEdu</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: transparent; padding: 10px; }
        .card { background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 25px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); max-width: 550px; margin: auto; }
        h2 { color: #2d3748; font-size: 1.3rem; margin-bottom: 5px; text-align: center; }
        p.subtitle { text-align: center; color: #718096; font-size: 0.85rem; margin-bottom: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        label { display: block; font-size: 0.8rem; color: #4a5568; font-weight: 600; margin-bottom: 5px; }
        input { width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; background: #4a5568; color: white; border: none; padding: 14px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; }
        button:hover { background: #2d3748; }
        #results { margin-top: 25px; padding: 20px; border-radius: 8px; display: none; background: #f8fafc; border: 1px solid #e2e8f0; }
        .nnt-box { text-align: center; margin: 15px 0; padding: 15px; background: #ebf8ff; border-radius: 10px; }
        .nnt-val { font-size: 2.5rem; font-weight: bold; color: #2b6cb0; }
        .metric-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; font-size: 0.9rem; }
        .metric-item { background: white; padding: 10px; border-radius: 6px; border: 1px solid #edf2f7; display: flex; justify-content: space-between; }
        .footer-note { font-size: 0.7rem; color: #a0aec0; margin-top: 15px; text-align: center; line-height: 1.4; }
    </style>
</head>
<body>

<div class="card">
    <h2>üîÑ Conversor de Medidas de Efecto</h2>
    <p class="subtitle">De la estad√≠stica a la utilidad cl√≠nica real</p>
    
    <div class="grid">
        <div>
            <label>Eventos (Tratamiento)</label>
            <input type="number" id="e_exp" value="10">
        </div>
        <div>
            <label>Total (Tratamiento)</label>
            <input type="number" id="n_exp" value="100">
        </div>
        <div>
            <label>Eventos (Control)</label>
            <input type="number" id="e_ctrl" value="20">
        </div>
        <div>
            <label>Total (Control)</label>
            <input type="number" id="n_ctrl" value="100">
        </div>
    </div>

    <button onclick="calculateMetrics()">Calcular Impacto Cl√≠nico</button>

    <div id="results">
        <div class="nnt-box">
            <span style="font-size: 0.9rem; color: #2c5282; font-weight: 600;">NNT (N√∫mero Necesario a Tratar)</span><br>
            <span class="nnt-val" id="nnt-display">0</span>
            <p id="nnt-text" style="font-size: 0.85rem; color: #4a5568; margin-top: 5px;"></p>
        </div>

        <div class="metric-grid">
            <div class="metric-item"><span>Riesgo Relativo:</span> <strong id="rr-val">0</strong></div>
            <div class="metric-item"><span>Odds Ratio:</span> <strong id="or-val">0</strong></div>
            <div class="metric-item"><span>Reducci√≥n Absoluta:</span> <strong id="arr-val">0%</strong></div>
            <div class="metric-item"><span>Reducci√≥n Relativa:</span> <strong id="rrr-val">0%</strong></div>
        </div>

        <p class="footer-note">
            El NNT indica cu√°ntos pacientes deben recibir el tratamiento para evitar un evento adicional en comparaci√≥n con el control. <br>
            <strong>BioestadisticaEdu ¬© 2025 - Mohsen Ebrahimi</strong>
        </p>
    </div>
</div>

<script>
function calculateMetrics() {
    const e1 = parseInt(document.getElementById('e_exp').value);
    const n1 = parseInt(document.getElementById('n_exp').value);
    const e2 = parseInt(document.getElementById('e_ctrl').value);
    const n2 = parseInt(document.getElementById('n_ctrl').value);

    const r1 = e1 / n1; // Riesgo expuesto
    const r2 = e2 / n2; // Riesgo control

    const rr = r1 / r2;
    const or = (e1 / (n1 - e1)) / (e2 / (n2 - e2));
    const arr = Math.abs(r1 - r2);
    const rrr = arr / r2;
    const nnt = Math.ceil(1 / arr);

    document.getElementById('results').style.display = 'block';
    document.getElementById('nnt-display').innerText = isFinite(nnt) ? nnt : "‚àû";
    document.getElementById('rr-val').innerText = rr.toFixed(2);
    document.getElementById('or-val').innerText = or.toFixed(2);
    document.getElementById('arr-val').innerText = (arr * 100).toFixed(1) + "%";
    document.getElementById('rrr-val').innerText = (rrr * 100).toFixed(1) + "%";
    
    document.getElementById('nnt-text').innerText = `Es necesario tratar a ${nnt} pacientes para prevenir 1 evento.`;
}
</script>
</body>
</html>